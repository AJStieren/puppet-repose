<open-tracing xmlns="http://<%= scope.lookupvar('::repose::cfg_namespace_host') %>/repose/open-tracing-service/v1.0"
 service-name="<%= @service_name %>">
    <jaeger>
    <%- if @connection_http -%>
        <connection-http endpoint="<%= @connection_http['endpoint'] %>"
            <%- if ! @connection_http['username'].nil? -%> username="<%= @connection_http['username'] %>"<%- end -%> 
            <%- if ! @connection_http['password'].nil? -%> password="<%= @connection_http['password'] %>"<%- end -%>
            <%- if ! @connection_http['token'].nil? -%> token="<%= @connection_http['token'] %>"<%- end -%>
        />
    <%- elsif @connection_udp -%>
        <connection-udp port="<%= @connection_udp['port'] %>" host="<%= @connection_udp['host'] %>" />
    <%- end -%>
    
    <%- if @sampling_constant -%>
        <sampling-constant <%- if ! @sampling_constant['toggle'].nil? -%>toggle="<%= @sampling_constant['toggle'] %>"<%- end -%>/>
    <%- elsif @sampling_probabilistic -%>
        <sampling-probabilistic <%- if ! @sampling_probabilistic['probability'].nil? -%>probability="<%= @sampling_probabilistic['probability'] %>"<%- end -%>/>
    <%- elsif @sampling_rate_limiting -%>
        <sampling-rate-limiting <%- if ! @sampling_rate_limiting['max_traces_per_second'].nil? -%>max-traces-per-second="<%= @sampling_rate_limiting['max_traces_per_second'] %>"<%- end -%>/>
    <%- end -%>
    </jaeger>
</open-tracing>
