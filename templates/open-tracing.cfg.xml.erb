<open-tracing xmlns="http://<%= scope.lookupvar('::repose::cfg_namespace_host') %>/repose/open-tracing-service/v1.0"
 service-name="<%= @service_name %>">
    <jaeger>
    <%- if @connection_type == 'http' -%>
        <connection-http endpoint="<%= @connection_endpoint %>"
            <%- if ! @connection_username.nil? -%> username="<%= @connection_username %>"<%- end -%> 
            <%- if ! @connection_password.nil? -%> password="<%= @connection_password %>"<%- end -%>
            <%- if ! @connection_token.nil? -%> token="<%= @connection_token %>"<%- end -%>
        />
    <%- elsif @connection_type == 'udp' -%>
        <connection-udp port="<%= @connection_port %>" host="<%= @connection_host %>" />
    <%- end -%>
    
    <%- if @sampling_type == 'probabilistic' -%>
        <sampling-probabilistic probability="<%= @probability %>" />
    <%- elsif @sampling_type == 'rate-limiting' -%>
        <sampling-rate-limiting max-traces-per-second="<%= @max_traces_per_second %>" />
    <%- elsif @sampling_type == 'constant' -%>
        <sampling-constant toggle="<%= @constant_toggle %>"/>
    <%- end -%>
    </jaeger>
</open-tracing>
